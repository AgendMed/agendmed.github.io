{% extends 'base.html' %}

{% block content %}
<h2>Editar Unidade de Saúde</h2>
<form method="post">
  {% csrf_token %}
  
  <label>Nome da Unidade:</label>
  {{ form.nome }}

  <label>Telefone:</label>
  {{ form.telefone }}

  <label>E-mail:</label>
  {{ form.email }}

  <label>CEP:</label>
  {{ form.cep }}

  <label>Rua:</label>
  {{ form.rua }}

  <label>Número:</label>
  {{ form.numero }}

  <button type="submit">Salvar Alterações</button>
</form>

<a href="{% url 'UnidadeSaude:detalhe_unidade' pk=unidade.pk %}">Cancelar</a>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const endereco = "{{ unidade.endereco }}";  // Pega o endereço completo

    if (endereco) {
      const partes = endereco.split(",");  // Divide o endereço nas vírgulas

      if (partes.length === 3) {
        document.getElementById("id_rua").value = partes[0].trim();      // Rua
        document.getElementById("id_numero").value = partes[1].trim();   // Número
        document.getElementById("id_cep").value = partes[2].trim();      // CEP
      }
    }
  });
</script>
{% endblock %}
